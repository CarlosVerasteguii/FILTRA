# Test Design: Story 1.4

Date: 2025-09-26
Designer: Quinn (Test Architect)

## Test Strategy Overview

- Total test scenarios: 6
- Unit tests: 3 (50%)
- Integration tests: 2 (33%)
- E2E tests: 1 (17%)
- Priority distribution: P0: 3, P1: 2, P2: 1

## Test Scenarios by Acceptance Criteria

### AC1: File I/O uses utf-8-sig first, cp1252 fallback; normalized newlines in output.

| ID           | Level | Priority | Test                                     | Justification                     |
| ------------ | ----- | -------- | ---------------------------------------- | --------------------------------- |
| 1.4-UNIT-001 | Unit  | P0       | Prefer UTF-8 BOM on read                 | Pure decode/normalize logic       |
| 1.4-UNIT-002 | Unit  | P0       | Fallback to cp1252 when UTF-8 fails      | Pure decode/normalize logic       |
| 1.4-INT-001  | Int   | P1       | CLI run summarizes encodings and uses \n | Verifies composed pipeline output |

### AC2: README examples quote paths; CLI handles spaces in file paths.

| ID          | Level | Priority | Test                                         | Justification            |
| ----------- | ----- | -------- | -------------------------------------------- | ------------------------ |
| 1.4-INT-002 | Int   | P0       | Run with spaced paths, filenames quoted      | Cross-component behavior |
| 1.4-E2E-001 | E2E   | P1       | Copy samples into spaced dir; run end-to-end | Validates real user flow |

### AC3: Installation and run steps verified on Windows 11 PowerShell.

| ID           | Level | Priority | Test                                  | Justification                        |
| ------------ | ----- | -------- | ------------------------------------- | ------------------------------------ |
| 1.4-UNIT-003 | Unit  | P2       | Ensure normalize_newlines removes CRs | Utility correctness supporting AC1/3 |

## Risk Coverage

- Encoding confusion across locales → mitigated by decode tests and CLI summary
- Path quoting issues → mitigated by spaced-path tests
- Windows-only newline semantics → mitigated by normalization tests

## Recommended Execution Order

1. P0 Unit tests (1.4-UNIT-001, 1.4-UNIT-002)
2. P0 Integration test (1.4-INT-002)
3. P1 Integration test (1.4-INT-001)
4. P1 E2E test (1.4-E2E-001)
5. P2 Unit test (1.4-UNIT-003)

---

test_design:
  scenarios_total: 6
  by_level:
    unit: 3
    integration: 2
    e2e: 1
  by_priority:
    p0: 3
    p1: 2
    p2: 1
  coverage_gaps: []

