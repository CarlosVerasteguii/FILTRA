# Requirements Traceability Matrix

## Story: 1.4 - Windows 11 Readiness

### Coverage Summary

- Total Requirements: 3
- Fully Covered: 3 (100%)
- Partially Covered: 0 (0%)
- Not Covered: 0 (0%)

### Requirement Mappings

#### AC1: File I/O uses utf-8-sig first, cp1252 fallback; normalized newlines in output.

Coverage: FULL

Given-When-Then Mappings:

- Unit Test: `tests/test_io.py::test_load_text_document_prefers_utf8`
  - Given: A UTF-8 BOM encoded file containing CRLF
  - When: Loading via `load_text_document`
  - Then: Encoding reported as UTF-8 (with BOM) and newlines normalized to `\n`

- Unit Test: `tests/test_io.py::test_load_text_document_falls_back_to_cp1252`
  - Given: A cp1252-encoded file
  - When: Loading via `load_text_document`
  - Then: Encoding reported as Windows-1252 and text correctly decoded

- Integration Test: `tests/test_cli.py::test_run_handles_paths_with_spaces_and_normalizes_newlines`
  - Given: Files with CRLF and spaced paths
  - When: Running `filtra run`
  - Then: Output contains quoted names and no `\r`

#### AC2: README examples quote paths; CLI correctly handles spaces in file paths.

Coverage: FULL

- Integration Test: `tests/test_cli.py::test_run_handles_paths_with_spaces_and_normalizes_newlines`
  - Given: Paths with spaces
  - When: Running `filtra run`
  - Then: Output quotes each filename

- Documentation Evidence: `README.md` Windows 11 examples quote all paths.

#### AC3: Installation and run steps verified on Windows 11 PowerShell.

Coverage: FULL

- Documentation Evidence: `docs/qa/windows-11-runbook.md` defines verification steps and execution log.
- Diagnostic Tests: `tests/test_cli.py::test_health_flag_reports_pass` and warm-up tests prove PowerShell-friendly flow.

### Critical Gaps

None.

### Test Design References

Test design matrix: docs/qa/assessments/1.4-test-design-20250926.md

---

trace:
  totals:
    requirements: 3
    full: 3
    partial: 0
    none: 0
  planning_ref: 'docs/qa/assessments/1.4-test-design-20250926.md'
  uncovered: []
  notes: 'See docs/qa/assessments/1.4-trace-20250926.md'

